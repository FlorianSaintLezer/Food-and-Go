{% extends 'base.html.twig' %}

{% block title %}Recette de
	{{recipes.title}}
{% endblock %}

{% block body %}

	<div
		id="comments-modal" class="modal">

		<!-- Modal content -->
		<div class="modal-content">
			<div class="modal-header">
				<span class="modal-close">&times;</span>
				<h3>Un commentaire sur la recette
					{{recipes.title}}
					?</h3>
			</div>
			<div class="modal-body">
				<form action="">
					<textarea name="" id="" cols="30" rows="10"></textarea>
					<button class="submit">Envoyer</button>
				</form>
			</div>
		</div>

	</div>

	<section class="show-recipe container">
		<div class="recipe-image" style="background-image: url('{{ asset('img/' ~ recipes.image) }}');">
			{% if app.user and app.user is same as(recipes.author) %}
				<div class="recipe-buttons">
					<button onclick="window.location.href='{{ path('recipe_edit',{'id' : recipes.id}) }}'" class="recipe-btn">
						<i class="fas fa-edit"></i>
						<span>Modifier</span>
					</button>
					<form class="recipe-buttons" method="POST" action="{{ path('recipe_delete', {'id' : recipes.id}) }}">
						<input type="hidden" name="_method" value="delete">
						<input type="hidden" name="_token" value="{{csrf_token('SUP' ~ recipes.id)}}">

						<button type="submit" value="Delete" class="deleteRecipes recipe-btn">
							<i class="far fa-trash-alt"></i>
							<span>Supprimer</span>
						</button>
					</form>


					{# <a class="recipe-btn" type="submit">
																				<i class="fas fa-trash-alt"></i>
																				<span>Supprimer</span>
																			</a> #}
				</div>
			{% endif %}
		</div>
		<div class="recipe-content">
			<div class="content-left">
				<div class="recipe-date">{{recipes.updatedAt|date("d/m/Y")}}</div>
				<h3 class="recipe-title">{{recipes.title}}</h3>
				<div class="recipe-description">{{recipes.description | raw}}</div>
				{# {{recipes.comments}} #}
			</div>

			{# <div
													class="content-right">
												</div> #}
		</div>
	</section>


	<section
		class="comments container">

		<!-- Trigger/Open The Modal -->
		<button id="modal-button">Open Modal</button>


		<h2>Commentaires</h2>
		{% for comment in recipes.comments %}
			{# START LOOP #}
			<div class="comment">
				<div class="comment-header">
					<h3 class="comment-author">{{comment.author}}</h3>
					<p>publié le
						{{recipes.updatedAt|date("d/m/Y")}}</p>
				</div>

				<div class="comment-content">
					{{comment.content}}
				</div>
				<div class="comment-footer">
					<button type="button">EDIT (peut-être</button>
					<button type="button">DELETE (peut-être)</button>
				</div>


			</div>
		{% endfor %}
	</section>


{% endblock %}
